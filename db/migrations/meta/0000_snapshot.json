{
  "version": "6",
  "dialect": "sqlite",
  "id": "7adb418e-708e-4998-a4e7-c3671b39ed97",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "entities": {
      "name": "entities",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "aliases": {
          "name": "aliases",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        }
      },
      "indexes": {
        "entities_name_idx": {
          "name": "entities_name_idx",
          "columns": [
            "name"
          ],
          "isUnique": false
        },
        "entities_type_idx": {
          "name": "entities_type_idx",
          "columns": [
            "type"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "entities_id_not_blank_check": {
          "name": "entities_id_not_blank_check",
          "value": "length(trim(\"entities\".\"id\")) > 0"
        },
        "entities_name_not_blank_check": {
          "name": "entities_name_not_blank_check",
          "value": "length(trim(\"entities\".\"name\")) > 0"
        },
        "entities_type_not_blank_check": {
          "name": "entities_type_not_blank_check",
          "value": "length(trim(\"entities\".\"type\")) > 0"
        },
        "entities_aliases_json_array_check": {
          "name": "entities_aliases_json_array_check",
          "value": "\"entities\".\"aliases\" is null or (json_valid(\"entities\".\"aliases\") and json_type(\"entities\".\"aliases\") = 'array')"
        },
        "entities_updated_at_check": {
          "name": "entities_updated_at_check",
          "value": "\"entities\".\"updated_at\" >= \"entities\".\"created_at\""
        }
      }
    },
    "task_dependencies": {
      "name": "task_dependencies",
      "columns": {
        "task_id": {
          "name": "task_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "depends_on_id": {
          "name": "depends_on_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "task_dependencies_depends_on_id_idx": {
          "name": "task_dependencies_depends_on_id_idx",
          "columns": [
            "depends_on_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "task_dependencies_task_id_tasks_id_fk": {
          "name": "task_dependencies_task_id_tasks_id_fk",
          "tableFrom": "task_dependencies",
          "tableTo": "tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "task_dependencies_depends_on_id_tasks_id_fk": {
          "name": "task_dependencies_depends_on_id_tasks_id_fk",
          "tableFrom": "task_dependencies",
          "tableTo": "tasks",
          "columnsFrom": [
            "depends_on_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "task_dependencies_task_id_depends_on_id_pk": {
          "columns": [
            "task_id",
            "depends_on_id"
          ],
          "name": "task_dependencies_task_id_depends_on_id_pk"
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {
        "task_dependencies_not_self_check": {
          "name": "task_dependencies_not_self_check",
          "value": "\"task_dependencies\".\"task_id\" <> \"task_dependencies\".\"depends_on_id\""
        }
      }
    },
    "task_entities": {
      "name": "task_entities",
      "columns": {
        "task_id": {
          "name": "task_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "entity_id": {
          "name": "entity_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "task_entities_entity_id_idx": {
          "name": "task_entities_entity_id_idx",
          "columns": [
            "entity_id"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "task_entities_task_id_tasks_id_fk": {
          "name": "task_entities_task_id_tasks_id_fk",
          "tableFrom": "task_entities",
          "tableTo": "tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "task_entities_entity_id_entities_id_fk": {
          "name": "task_entities_entity_id_entities_id_fk",
          "tableFrom": "task_entities",
          "tableTo": "entities",
          "columnsFrom": [
            "entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "task_entities_task_id_entity_id_pk": {
          "columns": [
            "task_id",
            "entity_id"
          ],
          "name": "task_entities_task_id_entity_id_pk"
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "task_tags": {
      "name": "task_tags",
      "columns": {
        "task_id": {
          "name": "task_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "tag": {
          "name": "tag",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        }
      },
      "indexes": {
        "task_tags_tag_idx": {
          "name": "task_tags_tag_idx",
          "columns": [
            "tag"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "task_tags_task_id_tasks_id_fk": {
          "name": "task_tags_task_id_tasks_id_fk",
          "tableFrom": "task_tags",
          "tableTo": "tasks",
          "columnsFrom": [
            "task_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {
        "task_tags_task_id_tag_pk": {
          "columns": [
            "task_id",
            "tag"
          ],
          "name": "task_tags_task_id_tag_pk"
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {
        "task_tags_tag_not_blank_check": {
          "name": "task_tags_tag_not_blank_check",
          "value": "length(trim(\"task_tags\".\"tag\")) > 0"
        }
      }
    },
    "tasks": {
      "name": "tasks",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true,
          "autoincrement": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "parent_id": {
          "name": "parent_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "scheduled_start": {
          "name": "scheduled_start",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "scheduled_end": {
          "name": "scheduled_end",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "actual_start": {
          "name": "actual_start",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "actual_end": {
          "name": "actual_end",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "note": {
          "name": "note",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(datetime('now'))"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "tasks_parent_id_idx": {
          "name": "tasks_parent_id_idx",
          "columns": [
            "parent_id"
          ],
          "isUnique": false
        },
        "tasks_status_idx": {
          "name": "tasks_status_idx",
          "columns": [
            "status"
          ],
          "isUnique": false
        },
        "tasks_completed_at_idx": {
          "name": "tasks_completed_at_idx",
          "columns": [
            "completed_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {
        "tasks_parent_id_tasks_id_fk": {
          "name": "tasks_parent_id_tasks_id_fk",
          "tableFrom": "tasks",
          "tableTo": "tasks",
          "columnsFrom": [
            "parent_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "tasks_id_not_blank_check": {
          "name": "tasks_id_not_blank_check",
          "value": "length(trim(\"tasks\".\"id\")) > 0"
        },
        "tasks_title_not_blank_check": {
          "name": "tasks_title_not_blank_check",
          "value": "length(trim(\"tasks\".\"title\")) > 0"
        },
        "tasks_status_check": {
          "name": "tasks_status_check",
          "value": "\"tasks\".\"status\" in ('pending', 'in_progress', 'completed', 'cancelled')"
        },
        "tasks_updated_at_check": {
          "name": "tasks_updated_at_check",
          "value": "\"tasks\".\"updated_at\" >= \"tasks\".\"created_at\""
        },
        "tasks_completed_at_after_created_check": {
          "name": "tasks_completed_at_after_created_check",
          "value": "\"tasks\".\"completed_at\" is null or \"tasks\".\"completed_at\" >= \"tasks\".\"created_at\""
        },
        "tasks_completion_state_check": {
          "name": "tasks_completion_state_check",
          "value": "(\n        (\"tasks\".\"status\" in ('completed', 'cancelled') and \"tasks\".\"completed_at\" is not null) or\n        (\"tasks\".\"status\" in ('pending', 'in_progress') and \"tasks\".\"completed_at\" is null)\n      )"
        },
        "tasks_parent_self_check": {
          "name": "tasks_parent_self_check",
          "value": "\"tasks\".\"parent_id\" is null or \"tasks\".\"parent_id\" <> \"tasks\".\"id\""
        },
        "tasks_scheduled_window_check": {
          "name": "tasks_scheduled_window_check",
          "value": "\"tasks\".\"scheduled_start\" is null or \"tasks\".\"scheduled_end\" is null or \"tasks\".\"scheduled_start\" < \"tasks\".\"scheduled_end\""
        },
        "tasks_actual_window_check": {
          "name": "tasks_actual_window_check",
          "value": "\"tasks\".\"actual_start\" is null or \"tasks\".\"actual_end\" is null or \"tasks\".\"actual_start\" < \"tasks\".\"actual_end\""
        }
      }
    }
  },
  "views": {},
  "enums": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "indexes": {}
  }
}